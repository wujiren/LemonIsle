<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>联萌岛 - 孩子安全护送演示</title>
    <link rel="stylesheet" href="style.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+SC:wght@400;500;700&display=swap" rel="stylesheet">
</head>
<body>


    <!-- 顶部通知条 -->
    <div class="toast" id="toast">
        <i class="fas fa-bell"></i>
        <span id="toast-message">系统准备就绪</span>
    </div>

    <!-- 地图容器 -->
    <div class="map-container">
        <!-- 背景地图层 -->
        <div class="map-background">
            <!-- 地点标记：学校 -->
            <div class="location-marker school" style="top: 10%; left: 10%;">
                <div class="marker-icon">🏫</div>
                <div class="marker-label">学校</div>
            </div>

            <!-- 地点标记：安全岛 -->
            <div class="location-marker island" style="top: 50%; left: 55%;">
                <div class="marker-icon">🎡</div>
                <div class="marker-label">安全岛</div>
            </div>

            <!-- 地点标记：家 -->
            <div class="location-marker home" style="top: 80%; left: 80%;">
                <div class="marker-icon">🏠</div>
                <div class="marker-label">家</div>
            </div>

            <!-- NFC打卡点：公园入口 -->
            <div class="nfc-point park-entry" id="nfc-entry" style="top: 40%; left: 45%;">
                <div class="nfc-icon">📍</div>
                <div class="nfc-label">NFC入口</div>
            </div>

            <!-- NFC打卡点：公园出口 -->
            <div class="nfc-point park-exit" id="nfc-exit" style="top: 58%; left: 65%;">
                <div class="nfc-icon">📍</div>
                <div class="nfc-label">NFC出口</div>
            </div>

            <!-- 路径：学校到安全岛 -->
            <svg class="path path-school-to-island" width="100%" height="100%" viewBox="0 0 100 100" preserveAspectRatio="none">
                <path class="road-background" d="M10 10 L35 10" fill="none"/>
                <path class="road-foreground" d="M10 10 L35 10" fill="none"/>
                <!-- 校门路：移除 % -->
                <path class="road-background" d="M10 10 L35 10" fill="none"/>
                <path class="road-foreground" d="M10 10 L35 10" fill="none"/>
                
                <!-- 使用百分比定位文本和点（这些属性是支持百分比的，或者改用 0-100 的数值） -->
                <text x="22.5" y="9" text-anchor="middle" class="road-label">校门路</text>
                <circle cx="35" cy="10" r="1" fill="#FF6B6B" stroke="white" stroke-width="0.2" class="corner-point"/>

                <!-- 彩虹路 -->
                <path class="road-background" d="M35 10 L50 40" fill="none"/>
                <path class="road-foreground" d="M35 10 L50 40" fill="none"/>
                <text x="42.5" y="25" text-anchor="middle" class="road-label">彩虹路</text>
                <circle cx="50" cy="40" r="1" fill="#FF6B6B" stroke="white" stroke-width="0.2" class="corner-point"/>

                <!-- 公园入口路 -->
                <path class="road-background" d="M50 40 L50 47.5 L55 50" fill="none"/>
                <path class="road-foreground" d="M50 40 L50 47.5 L55 50" fill="none"/>
                <text x="50" y="43.75" text-anchor="middle" class="road-label">公园入口</text>
            </svg>

            <!-- 路径：安全岛到家（同样修改） -->
            <svg class="path path-island-to-home" width="100%" height="100%" viewBox="0 0 100 100" preserveAspectRatio="none">
                <path class="road-background" d="M55 50 Q67 62 80 80" fill="none"/>
                <path class="road-foreground" d="M55 50 Q67 62 80 80" fill="none"/>
            </svg>

            <!-- 路径：守护员入场 -->
            <svg class="path path-guard-entry" width="100%" height="100%">
                <!-- 背景实线道路 -->
                <path class="road-background" d="M10% 80% Q30% 65% 55% 50%" fill="none"/>
                <!-- 前景虚线道路 -->
                <path class="road-foreground" d="M10% 80% Q30% 65% 55% 50%" fill="none"/>
            </svg>
        </div>

        <!-- 动态角色层 -->
        <div class="characters-layer">
            <!-- 孩子头像 -->
            <div class="character child" id="child-character" style="top: 10%; left: 10%;">
                <div class="avatar child-avatar">
                    <i class="fas fa-child"></i>
                </div>
                <div class="character-label">小明</div>
            </div>

            <!-- 守护员头像 -->
            <div class="character guard" id="guard-character" style="top: 80%; left: 10%; display: none;">
                <div class="avatar guard-avatar">
                    <i class="fas fa-shield-alt"></i>
                </div>
                <div class="character-label">李队长</div>
            </div>

            <!-- 家长头像（自己接送时使用） -->
            <div class="character parent" id="parent-character" style="top: 10%; left: 80%; display: none;">
                <div class="avatar parent-avatar">
                    <i class="fas fa-user-friends"></i>
                </div>
                <div class="character-label">爸爸</div>
            </div>
        </div>
    </div>

    <!-- 底部悬浮控制面板 -->
    <div class="control-panel">
        <div class="state-card">
            <div class="state-header">
                <div class="state-icon" id="state-icon">🚶‍♂️</div>
                <div class="state-title">
                    <h3 id="state-title">正在前往安全岛</h3>
                    <div class="state-subtitle" id="state-subtitle">智能路灯检测中...</div>
                </div>
            </div>

            <div class="state-info">
                <div class="info-item">
                    <i class="fas fa-clock"></i>
                    <span>时间: <span id="current-time">15:30</span></span>
                </div>
                <div class="info-item">
                    <i class="fas fa-map-marker-alt"></i>
                    <span>状态: <span id="status-text">放学路上</span></span>
                </div>
                <div class="info-item">
                    <i class="fas fa-stopwatch"></i>
                    <span>停留: <span id="stay-time">0分钟</span></span>
                </div>
                <div class="info-item">
                    <i class="fas fa-nfc-symbol"></i>
                    <span>打卡: <span id="nfc-status">⭕️ 未打卡</span></span>
                </div>
            </div>

            <div class="action-section">
                <div class="button-group">
                    <button class="action-btn primary-btn" id="action-btn" disabled>
                        <span id="btn-text">孩子行进中</span>
                    </button>
                    <button class="action-btn secondary-btn" id="self-pickup-btn" style="display: none;">
                        <span id="self-pickup-text">自己接送回家</span>
                    </button>
                </div>

                <div class="action-note" id="action-note">
                    等待孩子到达安全岛后可选择接送方式
                </div>
            </div>
        </div>
    </div>

    <!-- 完成模态框（守护员护送） -->
    <div class="modal-overlay guard-modal" id="guard-modal-overlay" style="display: none;">
        <div class="modal">
            <div class="modal-header">
                <i class="fas fa-check-circle success-icon"></i>
                <h2>孩子已安全到家！</h2>
            </div>

            <div class="modal-body">
                <div class="service-summary">
                    <div class="summary-item">
                        <div class="summary-label">护送人</div>
                        <div class="summary-value">李队长 (4.9分)</div>
                    </div>
                    <div class="summary-item">
                        <div class="summary-label">服务时长</div>
                        <div class="summary-value">15分钟</div>
                    </div>
                    <div class="summary-item">
                        <div class="summary-label">费用</div>
                        <div class="summary-value">¥15.00</div>
                    </div>
                    <div class="summary-item">
                        <div class="summary-label">安全评分</div>
                        <div class="summary-value">100分</div>
                    </div>
                </div>

                <div class="modal-actions">
                    <button class="modal-btn confirm-btn" id="confirm-btn">
                        <i class="fas fa-check"></i> 确认并支付
                    </button>
                    <button class="modal-btn reset-btn" id="reset-btn">
                        <i class="fas fa-redo"></i> 重置演示
                    </button>
                </div>
            </div>
        </div>
    </div>

    <!-- 完成模态框（家长自己接送） -->
    <div class="modal-overlay parent-modal" id="parent-modal-overlay" style="display: none;">
        <div class="modal">
            <div class="modal-header">
                <i class="fas fa-home home-icon"></i>
                <h2>接送完成！</h2>
            </div>

            <div class="modal-body">
                <div class="service-summary">
                    <div class="summary-item">
                        <div class="summary-label">接送人</div>
                        <div class="summary-value">爸爸</div>
                    </div>
                    <div class="summary-item">
                        <div class="summary-label">接送时长</div>
                        <div class="summary-value">20分钟</div>
                    </div>
                    <div class="summary-item">
                        <div class="summary-label">到达时间</div>
                        <div class="summary-value" id="parent-arrival-time">17:10</div>
                    </div>
                    <div class="summary-item">
                        <div class="summary-label">安全状态</div>
                        <div class="summary-value">👨‍👦 安全到家</div>
                    </div>
                </div>

                <div class="message-box">
                    <p>🎉 您已成功接送孩子回家！</p>
                    <p>感谢您对"联萌岛"安全接送理念的信任。</p>
                    <p>如需再次使用守护员服务，请随时联系我们。</p>
                </div>

                <div class="modal-actions">
                    <button class="modal-btn finish-btn" id="finish-btn">
                        <i class="fas fa-home"></i> 完成
                    </button>
                    <button class="modal-btn reset-btn" id="parent-reset-btn">
                        <i class="fas fa-redo"></i> 重置演示
                    </button>
                </div>
            </div>
        </div>
    </div>

    <script src="script.js"></script>
</body>
</html>