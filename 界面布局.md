### 1. 界面布局设计 (UI Layout)

我们将页面分为三层：**背景地图层**、**动态角色层**、**悬浮控制层**。

#### A. 整体视觉构图 (手机竖屏)

想象这是一个类似于打车软件或外卖软件的界面。

```text
+---------------------------------------+
|  9:41                        🔋 100%  |  <-- 手机状态栏
+---------------------------------------+
|  [通知] 🔔 您的孩子已进入安全岛...      |  <-- 顶部消息条 (Toast)
+---------------------------------------+
|                                       |
|  (学校) 🏫                            |  <-- 地图区域 (占据全屏)
|     \                                 |
|      \ (彩虹路 - 路径A)                |
|       \                               |
|        \   🌳 (安全岛) 🎡             |  <-- 核心区域：安全岛
|         \  [孩子头像]                 |
|          \                            |
|           \                           |
|            \ (回家路 - 路径B)          |
|             \                         |
|              \              🏠 (家)   |
|                                       |
+---------------------------------------+
|  [ 状态卡片区域 ]                      |  <-- 底部悬浮面板
|                                       |
|  当前状态: 🎡 玩耍中 (已停留 30分)      |
|  -----------------------------------  |
|  [ 🟢 呼叫守护员接孩子 (¥15) ]         |  <-- 主要操作按钮
|  [ 🟡 自己接送孩子回家 ]             |  <-- 替代操作按钮
+---------------------------------------+

```

---

### 2. 详细交互脚本 (The Demo Script)

这个 Demo 将像一场小电影一样播放，分为三个“剧幕”。

#### 🎬 第一幕：放学归巢 (自动触发)

- **触发条件：** 页面加载完成，或者点击“模拟开始”。
- **画面表现：**
- **地图：** 孩子头像从左上角【学校】出现。
- **动画：** 头像沿虚线（彩虹路）匀速移动向中间的【安全岛】。
- **底部面板：** 显示“正在前往安全岛...”，按钮置灰不可点。
- **顶部通知：** 弹出“系统提示：孩子已放学”。

#### 🎬 第二幕：安全岛托管 (等待/玩耍)

- **触发条件：** 孩子头像到达【安全岛】坐标。
- **画面表现：**
- **地图：** 孩子头像停在公园图标上，可能会有一个轻微的呼吸灯效果（表示在线/活跃）。
- **时间加速：** 底部面板出现一个数字时钟，时间飞快跳动（模拟：16:00 -> 16:30 -> 17:00）。
- **底部面板：** 状态变为"🎡 正在安全岛玩耍"。出现两个按钮：**"呼叫守护员接送 (¥15)"** 和 **"自己接送回家"**。

- **用户操作：** 此时，演示者（您）可以选择点击其中一个按钮。

#### 🎬 第三幕：专人护送 (接单与回家)

- **触发条件：** 点击按钮后。
- **画面表现：**
- **步骤 1 (派单)：** 按钮显示“正在派单...”，延迟 2 秒。
- **步骤 2 (接单)：** 顶部通知“守护员 李队长 已接单”。地图边缘出现【守护员头像】。
- **步骤 3 (汇合)：** 守护员头像快速移动到【安全岛】，与孩子头像重叠。
- **步骤 4 (护送)：** 两个头像（合并状态）沿另一条路径移动向右下角的【家】。
- **底部面板：** 显示"守护员正在护送中... 预计 5 分钟到达"。

#### 🎬 第三幕（替代选项）：自己接送

- **触发条件：** 点击"自己接送回家"按钮后。
- **画面表现：**
  1. **出发：** 地图右上角出现【家长头像】（👨‍👦 绿色图标），标签显示"爸爸"。
  2. **前往安全岛：** 家长头像移动到中间的【安全岛】。
  3. **接孩子：** 家长到达安全岛后，【孩子头像】隐藏，表示已接上孩子。
  4. **回家：** 【家长头像】带着孩子移动到右下角的【家】。
- **底部面板：** 显示"自己接送中... 正在护送孩子回家"。
- **顶部通知：** 依次显示"家长出发前往安全岛" → "家长已接到孩子" → "家长带孩子回家中"。

#### 🎬 终局：订单完成

- **触发条件：** 头像到达【家】坐标。
- **画面表现：** \* 屏幕中央弹出模态框 (Modal)：
- **“孩子已安全到家！”**
- 显示本次服务简报（护送人：李队长，历时：15 分钟）。
- 按钮：“确认并支付”。

---

### 3. 数据结构设计 (Mock Data)

为了实现上述脚本，我们需要准备以下几组 Mock 数据（将在代码中定义）：

**1. 坐标点 (基于百分比，适配不同手机屏幕):**

```javascript
const mapPoints = {
  school: { top: "10%", left: "10%" },
  island: { top: "45%", left: "50%" }, // 屏幕中心
  home: { top: "80%", left: "80%" },
  guardSpawn: { top: "80%", left: "10%" }, // 守护员出生点
};
```

**2. 状态机 (State Machine):**

```javascript
const appState = {
  PHASE_1_WALKING: "walking_to_island", // 放学路上
  PHASE_2_WAITING: "waiting_at_island", // 岛上玩耍 (等待接单)
  PHASE_3_MATCHING: "matching_guard", // 派单中
  PHASE_4_ESCORTING: "escorting_home", // 守护员护送路上
  PHASE_SELF_ESCORTING: "self_escorting_home", // 自己接送路上
  PHASE_5_FINISHED: "finished", // 到家
};
```

---

### 4. 关键技术细节 (为了效果更逼真)

为了让这个 Demo 看起来像真产品，而不是粗糙的练习，建议在实现时加入以下细节：

1. **平滑动画 (CSS Transition):** 所有的移动都必须用 `transition: all 3s linear`，不能瞬间跳变。
2. **角色区分:** \* 孩子头像用**暖色调**边框 (橙/黄)。

- 守护员头像用**冷色调**边框 (蓝/绿)，体现安全感。

3. **地图背景:** \* 找一张简单的卡通地图底图是关键。如果没有，我们可以用 CSS 画三个圆圈代表地点，用虚线 SVG 连接代表路径。
