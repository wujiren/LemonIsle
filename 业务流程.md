我们将演示流程分为三个清晰的阶段。在手机网页上，这将像在看一个即时互动的“动画片”。

#### 第一阶段：自主归巢（学校 \rightarrow 安全岛）

- **场景：** 下午 3:30，学校放学。
- **动作：** 孩子离开学校，沿着"彩虹路"自行前往社区安全岛，在公园入口进行 NFC 打卡确认入园。
- **家长端画面：**
- 地图上，孩子头像从“学校”移动到“安全岛”。
- 显示状态：“孩子正在通过彩虹路...”（模拟路灯感应）。
- NFC 打卡状态：公园入口打卡成功时显示“✅ 已入园”标识。
- **关键点：** 此时家长**不能**下单，按钮置灰（或显示“孩子行进中”）。

#### 第二阶段：安全岛托管（停留/玩耍）

- **场景：** 下午 3:45 - 5:00，孩子在安全岛做作业或玩耍。
- **动作：** 孩子到达安全岛，系统自动打卡。
- **家长端画面：**
- 孩子头像停留在“安全岛”位置。
- 状态栏变成绿色，显示：“已安全到达，正在联萌岛玩耍”。
- 显示一个虚拟时钟或计时器（模拟时间的流逝）。
- 打卡状态：控制面板显示“✅ 已入园”标识。
- **交互触发点：** 当时间到达预设点（比如模拟的 5:00），或者家长手动点击，**“呼叫守护员接单”**的按钮点亮/浮现。

#### 第三阶段：专人护送（安全岛 \rightarrow 家）

- **场景：** 下午 5:00，家长点击下单。
- **动作：** 安全员接单 \rightarrow 到达岛上接人 \rightarrow 公园出口 NFC 打卡 \rightarrow 送回家。
- **家长端画面：**

1. **接单：** 地图上出现“安全员”图标，移动到安全岛。
2. **汇合：** 提示“安全员已接到孩子”。
3. **离园打卡：** 在公园出口进行 NFC 打卡确认离园，显示“✅ 已离园”标识。
4. **回家：** 两个头像合并，一起从“安全岛”移动到“家”。
5. **结束：** 弹窗"服务完成，孩子已安全到家"，显示入园/离园时间记录。

#### 第三阶段（替代选项）：自己接送（安全岛 \rightarrow 家）

- **场景：** 下午 5:00，家长选择自己接送孩子。
- **动作：** 家长从家出发到达安全岛接孩子 \rightarrow 一起回家。
- **家长端画面：**
  1. **出发：** 地图右上角出现家长头像（绿色图标，标签"爸爸"）。
  2. **前往安全岛：** 家长头像移动到安全岛位置。
  3. **接孩子：** 家长到达安全岛后，孩子头像隐藏（表示已接上）。
  4. **回家：** 家长头像（带着孩子）移动到家的位置。
  5. **结束：** 弹窗"自己接送完成，孩子已安全到家"。

---

### 3. Demo 功能需求详细规格

为了做成一个流畅的 Demo，我们需要在前端模拟以下状态机（State Machine）：

#### A. 界面布局 (UI Layout)

我们需要一张包含关键节点的背景地图（图片）：

1. **左上：** 学校 (School)
2. **中间区域：**
   - **公园入口：** NFC 打卡点（进入安全岛）
   - **安全岛：** 核心玩耍区域
   - **公园出口：** NFC 打卡点（离开安全岛）
3. **右下：** 家 (Home)

#### B. 交互控制面板 (Control Panel)

屏幕下方的操作区随状态变化：

| 阶段           | 显示内容 (文案/组件)                                                                   | 可操作性                          |
| -------------- | -------------------------------------------------------------------------------------- | --------------------------------- |
| **P1. 放学路** | 文本：“正在前往安全岛...”<br>进度：智能路灯检测中<br>打卡状态：公园入口 NFC 识别中...  | 🚫 不可操作                       |
| **P2. 玩耍中** | 文本：“孩子正在安全岛玩耍”<br>数据：已停留 30 分钟<br>打卡状态：✅ 已入园              | ✅ 按钮：**[ 呼叫守护员送回家 ]** |
| **P3. 接单中** | 文本：“正在呼叫守护员...”<br>打卡状态：✅ 已入园                                       | 🚫 等待中 (模拟 2 秒延时)         |
| **P4. 护送中** | 卡片：守护员 王大哥 (4.9 分)<br>状态：正在送往家中<br>打卡状态：公园出口 NFC 识别中... | 📞 电话图标 (装饰性)              |
| **P5. 已到家** | 文本：“订单结束”<br>打卡记录：入园时间 15:45，离园时间 17:05                           | ✅ 按钮：**[ 重置演示 ]**         |

#### C. Mock 数据需求 (模拟数据)

Demo 不需要后端，我们需要定义好“剧本数据”：

**1. 路径坐标数组 (Path Coordinates):**

- `path_school_to_island`: 定义从学校门口走到公园入口的轨迹。
- `path_guard_entry`: 定义守护员从地图边缘走到公园的轨迹。
- `path_island_to_home`: 定义从公园出口走到家的轨迹。
- `nfc_entry_point`: 公园入口 NFC 打卡点坐标
- `nfc_exit_point`: 公园出口 NFC 打卡点坐标

**2. 时间模拟 (Time Simulation):**

- Demo 中不能真的等 1 小时。我们需要一个**时间加速器**。
- 当进入“阶段二”时，屏幕上的虚拟时钟快速跳动（例如：每秒钟跳过 10 分钟），以此暗示孩子已经玩了很久，营造“该回家了”的紧迫感。
